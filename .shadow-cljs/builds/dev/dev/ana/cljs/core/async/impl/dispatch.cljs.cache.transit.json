["^ ","~:output",["^ ","~:js","goog.provide('cljs.core.async.impl.dispatch');\ngoog.require('cljs.core');\ngoog.require('cljs.core.async.impl.buffers');\ngoog.require('goog.async.nextTick');\ncljs.core.async.impl.dispatch.tasks = cljs.core.async.impl.buffers.ring_buffer((32));\ncljs.core.async.impl.dispatch.running_QMARK_ = false;\ncljs.core.async.impl.dispatch.queued_QMARK_ = false;\ncljs.core.async.impl.dispatch.TASK_BATCH_SIZE = (1024);\ncljs.core.async.impl.dispatch.process_messages = (function cljs$core$async$impl$dispatch$process_messages(){\ncljs.core.async.impl.dispatch.running_QMARK_ = true;\n\ncljs.core.async.impl.dispatch.queued_QMARK_ = false;\n\nvar count_32878 = (0);\nwhile(true){\nvar m_32879 = cljs.core.async.impl.dispatch.tasks.pop();\nif((m_32879 == null)){\n} else {\n(m_32879.cljs$core$IFn$_invoke$arity$0 ? m_32879.cljs$core$IFn$_invoke$arity$0() : m_32879.call(null));\n\nif((count_32878 < cljs.core.async.impl.dispatch.TASK_BATCH_SIZE)){\nvar G__32880 = (count_32878 + (1));\ncount_32878 = G__32880;\ncontinue;\n} else {\n}\n}\nbreak;\n}\n\ncljs.core.async.impl.dispatch.running_QMARK_ = false;\n\nif((cljs.core.async.impl.dispatch.tasks.length > (0))){\nreturn (cljs.core.async.impl.dispatch.queue_dispatcher.cljs$core$IFn$_invoke$arity$0 ? cljs.core.async.impl.dispatch.queue_dispatcher.cljs$core$IFn$_invoke$arity$0() : cljs.core.async.impl.dispatch.queue_dispatcher.call(null));\n} else {\nreturn null;\n}\n});\ncljs.core.async.impl.dispatch.queue_dispatcher = (function cljs$core$async$impl$dispatch$queue_dispatcher(){\nif((cljs.core.async.impl.dispatch.queued_QMARK_) && (cljs.core.async.impl.dispatch.running_QMARK_)){\nreturn null;\n} else {\ncljs.core.async.impl.dispatch.queued_QMARK_ = true;\n\nreturn goog.async.nextTick(cljs.core.async.impl.dispatch.process_messages);\n}\n});\ncljs.core.async.impl.dispatch.run = (function cljs$core$async$impl$dispatch$run(f){\ncljs.core.async.impl.dispatch.tasks.unbounded_unshift(f);\n\nreturn cljs.core.async.impl.dispatch.queue_dispatcher();\n});\ncljs.core.async.impl.dispatch.queue_delay = (function cljs$core$async$impl$dispatch$queue_delay(f,delay){\nreturn setTimeout(f,delay);\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ "],"~:use-macros",null,"~:excludes",["~#set",[]],"~:name","~$cljs.core.async.impl.dispatch","~:op","~:ns","~:imports",null,"~:requires",["^ ","~$cljs.core.async.impl.buffers","^?","~$buffers","^?","~$goog.async.nextTick","^A","~$cljs.core","^B","~$goog","^C"],"~:seen",["^8",["~:require"]],"~:uses",null,"~:require-macros",["^ ","^B","^B"],"~:form",["~#list",["~$ns","^:",["^I",["^E",["^?","~:as","^@"],["^A"]]]]],"~:flags",["^ ","^E",["^8",[]]],"~:js-deps",["^ "],"~:deps",["^C","^B","^?","^A"]],"^<","^:","~:resource-id",["~:shadow.build.classpath/resource","cljs/core/async/impl/dispatch.cljs"],"~:compiled-at",1520755144714,"~:resource-name","cljs/core/async/impl/dispatch.cljs","~:warnings",[],"~:source","(ns cljs.core.async.impl.dispatch\n  (:require [cljs.core.async.impl.buffers :as buffers]\n            [goog.async.nextTick]))\n\n(def tasks (buffers/ring-buffer 32))\n(def running? false)\n(def queued? false)\n\n(def TASK_BATCH_SIZE 1024)\n\n(declare queue-dispatcher)\n\n(defn process-messages []\n  (set! running? true)\n  (set! queued? false)\n  (loop [count 0]\n    (let [m (.pop tasks)]\n      (when-not (nil? m)\n        (m)\n        (when (< count TASK_BATCH_SIZE)\n          (recur (inc count))))))\n  (set! running? false)\n  (when (> (.-length tasks) 0)\n    (queue-dispatcher)))\n\n(defn queue-dispatcher []\n  (when-not (and queued? running?)\n    (set! queued? true)\n    (goog.async.nextTick process-messages)))\n\n(defn run [f]\n  (.unbounded-unshift tasks f)\n  (queue-dispatcher))\n\n(defn queue-delay [f delay]\n  (js/setTimeout f delay))\n\n","~:reader-features",["^8",["~:cljs"]],"~:source-map",["^ ","~i4",["^ ","~i0",[["^ ","~:gcol",0,"~:gline",4]],"~i5",[["^ ","^X",0,"^Y",4,"^9","cljs.core.async.impl.dispatch/tasks"]],"~i11",[["^ ","^X",38,"^Y",4],["^ ","^X",79,"^Y",4]],"~i12",[["^ ","^X",38,"^Y",4,"^9","cljs.core.async.impl.buffers/ring-buffer"]]],"~i5",["^ ","~i0",[["^ ","^X",0,"^Y",5],["^ ","^X",47,"^Y",5]],"~i5",[["^ ","^X",0,"^Y",5,"^9","cljs.core.async.impl.dispatch/running?"]]],"~i6",["^ ","~i0",[["^ ","^X",0,"^Y",6],["^ ","^X",46,"^Y",6]],"~i5",[["^ ","^X",0,"^Y",6,"^9","cljs.core.async.impl.dispatch/queued?"]]],"~i8",["^ ","~i0",[["^ ","^X",0,"^Y",7],["^ ","^X",48,"^Y",7]],"~i5",[["^ ","^X",0,"^Y",7,"^9","cljs.core.async.impl.dispatch/TASK_BATCH_SIZE"]]],"~i10",["^ ","~i0",[["^ ","^X",0,"^Y",8],["^ ","^X",0,"^Y",8]]],"^[",["^ ","~i0",[["^ ","^X",0,"^Y",8],["^ ","^X",49,"^Y",8],["^ ","^X",0,"^Y",9]],"~i6",[["^ ","^X",0,"^Y",8,"^9","cljs.core.async.impl.dispatch/process-messages"]]],"~i13",["^ ","~i2",[["^ ","^X",0,"^Y",9],["^ ","^X",47,"^Y",9]],"~i8",[["^ ","^X",0,"^Y",9,"^9","cljs.core.async.impl.dispatch/running?"]]],"~i14",["^ ","~i2",[["^ ","^X",0,"^Y",11],["^ ","^X",46,"^Y",11]],"~i8",[["^ ","^X",0,"^Y",11,"^9","cljs.core.async.impl.dispatch/queued?"]]],"~i15",["^ ","~i2",[["^ ","^X",0,"^Y",13],["^ ","^X",18,"^Y",13],["^ ","^X",0,"^Y",15]],"~i9",[["^ ","^X",4,"^Y",13,"^9","count"]]],"~i16",["^ ","~i4",[["^ ","^X",0,"^Y",15],["^ ","^X",0,"^Y",16]],"^10",[["^ ","^X",4,"^Y",15,"^9","m"]],"^[",[["^ ","^X",14,"^Y",15]],"~i18",[["^ ","^X",14,"^Y",15,"^9","cljs.core.async.impl.dispatch/tasks"]]],"~i17",["^ ","~i6",[["^ ","^X",0,"^Y",16],["^ ","^X",0,"^Y",17],["^ ","^X",0,"^Y",18]],"^14",[["^ ","^X",3,"^Y",16],["^ ","^X",15,"^Y",16]],"~i22",[["^ ","^X",4,"^Y",16,"^9","m"]]],"^15",["^ ","~i8",[["^ ","^X",0,"^Y",18]],"~i9",[["^ ","^X",1,"^Y",18,"^9","m"],["^ ","^X",41,"^Y",18,"^9","m"],["^ ","^X",83,"^Y",18,"^9","m"]]],"~i19",["^ ","~i8",[["^ ","^X",0,"^Y",20],["^ ","^X",0,"^Y",21],["^ ","^X",0,"^Y",25]],"^12",[["^ ","^X",3,"^Y",20]],"^16",[["^ ","^X",4,"^Y",20,"^9","count"]],"~i23",[["^ ","^X",18,"^Y",20,"^9","cljs.core.async.impl.dispatch/TASK_BATCH_SIZE"]]],"~i20",["^ ","^10",[["^ ","^X",0,"^Y",21]],"^16",[["^ ","^X",15,"^Y",21],["^ ","^X",30,"^Y",21]],"^17",[["^ ","^X",16,"^Y",21,"^9","count"]]],"~i21",["^ ","~i2",[["^ ","^X",0,"^Y",30],["^ ","^X",47,"^Y",30]],"~i8",[["^ ","^X",0,"^Y",30,"^9","cljs.core.async.impl.dispatch/running?"]]],"^17",["^ ","~i2",[["^ ","^X",0,"^Y",32],["^ ","^X",0,"^Y",33],["^ ","^X",0,"^Y",35]],"~i8",[["^ ","^X",3,"^Y",32],["^ ","^X",49,"^Y",32]],"^Z",[["^ ","^X",4,"^Y",32]],"^1;",[["^ ","^X",4,"^Y",32,"^9","cljs.core.async.impl.dispatch/tasks"]]],"^19",["^ ","~i4",[["^ ","^X",0,"^Y",33]],"~i5",[["^ ","^X",8,"^Y",33,"^9","cljs.core.async.impl.dispatch/queue-dispatcher"],["^ ","^X",87,"^Y",33,"^9","cljs.core.async.impl.dispatch/queue-dispatcher"],["^ ","^X",168,"^Y",33,"^9","cljs.core.async.impl.dispatch/queue-dispatcher"]]],"~i25",["^ ","~i0",[["^ ","^X",0,"^Y",38],["^ ","^X",49,"^Y",38],["^ ","^X",0,"^Y",39]],"~i6",[["^ ","^X",0,"^Y",38,"^9","cljs.core.async.impl.dispatch/queue-dispatcher"]]],"~i26",["^ ","~i2",[["^ ","^X",0,"^Y",39],["^ ","^X",0,"^Y",40],["^ ","^X",0,"^Y",42]],"^[",[["^ ","^X",3,"^Y",39]],"^16",[["^ ","^X",4,"^Y",39,"^9","cljs.core.async.impl.dispatch/queued?"]],"^1<",[["^ ","^X",53,"^Y",39,"^9","cljs.core.async.impl.dispatch/running?"]]],"~i27",["^ ","~i4",[["^ ","^X",0,"^Y",42],["^ ","^X",46,"^Y",42]],"^10",[["^ ","^X",0,"^Y",42,"^9","cljs.core.async.impl.dispatch/queued?"]]],"~i28",["^ ","~i4",[["^ ","^X",0,"^Y",44]],"~i5",[["^ ","^X",7,"^Y",44,"^9","goog/async.nextTick"]],"^1<",[["^ ","^X",27,"^Y",44,"^9","cljs.core.async.impl.dispatch/process-messages"]]],"~i30",["^ ","~i0",[["^ ","^X",0,"^Y",47],["^ ","^X",36,"^Y",47],["^ ","^X",0,"^Y",48]],"~i6",[["^ ","^X",0,"^Y",47,"^9","cljs.core.async.impl.dispatch/run"]],"^Z",[["^ ","^X",80,"^Y",47,"^9","f"]]],"~i31",["^ ","~i2",[["^ ","^X",0,"^Y",48]],"^17",[["^ ","^X",0,"^Y",48,"^9","cljs.core.async.impl.dispatch/tasks"]],"^1?",[["^ ","^X",54,"^Y",48,"^9","f"]]],"~i32",["^ ","~i2",[["^ ","^X",0,"^Y",50]],"~i3",[["^ ","^X",7,"^Y",50,"^9","cljs.core.async.impl.dispatch/queue-dispatcher"]]],"~i34",["^ ","~i0",[["^ ","^X",0,"^Y",52],["^ ","^X",44,"^Y",52],["^ ","^X",0,"^Y",53]],"~i6",[["^ ","^X",0,"^Y",52,"^9","cljs.core.async.impl.dispatch/queue-delay"]],"^18",[["^ ","^X",96,"^Y",52,"^9","f"]],"^1;",[["^ ","^X",98,"^Y",52,"^9","delay"]]],"~i35",["^ ","~i2",[["^ ","^X",0,"^Y",53]],"~i3",[["^ ","^X",7,"^Y",53,"^9","js/setTimeout"]],"^16",[["^ ","^X",18,"^Y",53,"^9","f"]],"^18",[["^ ","^X",20,"^Y",53,"^9","delay"]]]],"~:cljc",false],"~:cache-keys",["~#cmap",[["^P","goog/dom/tagname.js"],1512390114000,["~:macro","^B"],1512390111000,["^P","goog/math/math.js"],1512390114000,["^P","goog/labs/useragent/browser.js"],1512390114000,["^P","goog/array/array.js"],1512390114000,["^P","goog/debug/error.js"],1512390114000,["^P","goog/dom/nodetype.js"],1512390114000,["^P","goog/object/object.js"],1512390114000,"~:SHADOW-TIMESTAMP",1520755094000,["^P","goog/math/long.js"],1512390114000,["^P","goog/functions/functions.js"],1512390114000,["^P","cljs/core/async/impl/dispatch.cljs"],1516111268000,["^P","cljs/core/async/impl/protocols.cljs"],1516111268000,["^P","goog/structs/map.js"],1512390114000,["^P","goog/labs/useragent/engine.js"],1512390114000,["^P","goog/asserts/asserts.js"],1512390114000,["^P","cljs/core/async/impl/buffers.cljs"],1516111268000,["^P","goog/uri/uri.js"],1512390114000,["^P","goog/base.js"],1512390114000,["^P","goog/structs/structs.js"],1512390114000,["^P","goog/debug/entrypointregistry.js"],1512390114000,["^P","goog/string/string.js"],1512390114000,["^P","goog/reflect/reflect.js"],1512390114000,["^P","goog/labs/useragent/util.js"],1512390114000,["^P","goog/string/stringbuffer.js"],1512390114000,["^P","goog/iter/iter.js"],1512390114000,["^P","goog/async/nexttick.js"],1512390114000,["^P","goog/dom/htmlelement.js"],1512390114000,["^P","cljs/core.cljs"],1512390111000,["^P","goog/math/integer.js"],1512390114000,["^P","goog/uri/utils.js"],1512390114000]],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ "],"^6",null,"^7",["^8",[]],"^9","^:","^=",null,"^>",["^ ","^?","^?","^@","^?","^A","^A","^B","^B","^C","^C"],"^D",["^8",["^E"]],"~:shadow/js-access-global",["^8",["setTimeout"]],"^F",null,"~:defs",["^ ","~$tasks",["^ ","^9","~$cljs.core.async.impl.dispatch/tasks","~:file","cljs/core/async/impl/dispatch.cljs","~:line",5,"~:column",1,"~:end-line",5,"~:end-column",11,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",5,"^1Q",6,"^1R",5,"^1S",11],"~:tag","~$any"],"~$running?",["^ ","^9","~$cljs.core.async.impl.dispatch/running?","^1O","cljs/core/async/impl/dispatch.cljs","^1P",6,"^1Q",1,"^1R",6,"^1S",14,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",6,"^1Q",6,"^1R",6,"^1S",14],"^1T","~$boolean"],"~$queued?",["^ ","^9","~$cljs.core.async.impl.dispatch/queued?","^1O","cljs/core/async/impl/dispatch.cljs","^1P",7,"^1Q",1,"^1R",7,"^1S",13,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",7,"^1Q",6,"^1R",7,"^1S",13],"^1T","^1X"],"~$TASK_BATCH_SIZE",["^ ","^9","~$cljs.core.async.impl.dispatch/TASK_BATCH_SIZE","^1O","cljs/core/async/impl/dispatch.cljs","^1P",9,"^1Q",1,"^1R",9,"^1S",21,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",9,"^1Q",6,"^1R",9,"^1S",21],"^1T","~$number"],"~$queue-dispatcher",["^ ","~:protocol-inline",null,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",26,"^1Q",7,"^1R",26,"^1S",23,"~:arglists",["^I",["~$quote",["^I",[[]]]]]],"^9","~$cljs.core.async.impl.dispatch/queue-dispatcher","~:variadic",false,"^1O","cljs/core/async/impl/dispatch.cljs","^1S",23,"~:method-params",["^I",[[]]],"~:protocol-impl",null,"~:arglists-meta",["^I",[null,null]],"^1Q",1,"^1P",26,"^1R",26,"~:max-fixed-arity",0,"~:fn-var",true,"^24",["^I",["^25",["^I",[[]]]]]],"~$process-messages",["^ ","^23",null,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",13,"^1Q",7,"^1R",13,"^1S",23,"^24",["^I",["^25",["^I",[[]]]]]],"^9","~$cljs.core.async.impl.dispatch/process-messages","^27",false,"^1O","cljs/core/async/impl/dispatch.cljs","^1S",23,"^28",["^I",[[]]],"^29",null,"^2:",["^I",[null,null]],"^1Q",1,"^1P",13,"^1R",13,"^2;",0,"^2<",true,"^24",["^I",["^25",["^I",[[]]]]]],"~$run",["^ ","^23",null,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",31,"^1Q",7,"^1R",31,"^1S",10,"^24",["^I",["^25",["^I",[["~$f"]]]]]],"^9","~$cljs.core.async.impl.dispatch/run","^27",false,"^1O","cljs/core/async/impl/dispatch.cljs","^1S",10,"^28",["^I",[["~$f"]]],"^29",null,"^2:",["^I",[null,null]],"^1Q",1,"^1P",31,"^1R",31,"^2;",1,"^2<",true,"^24",["^I",["^25",["^I",[["~$f"]]]]]],"~$queue-delay",["^ ","^23",null,"^5",["^ ","^1O","cljs/core/async/impl/dispatch.cljs","^1P",35,"^1Q",7,"^1R",35,"^1S",18,"^24",["^I",["^25",["^I",[["~$f","~$delay"]]]]]],"^9","~$cljs.core.async.impl.dispatch/queue-delay","^27",false,"^1O","cljs/core/async/impl/dispatch.cljs","^1S",18,"^28",["^I",[["~$f","^2B"]]],"^29",null,"^2:",["^I",[null,null]],"^1Q",1,"^1P",35,"^1R",35,"^2;",2,"^2<",true,"^24",["^I",["^25",["^I",[["~$f","^2B"]]]]]]],"^G",["^ ","^B","^B"],"^L",["^ ","^E",["^8",[]]],"^M",["^ "],"^N",["^C","^B","^?","^A"]],"^<","^:","~:ns-specs",["^ "],"~:ns-speced-vars",[],"~:compiler-options",["^1G",[["^2F","~:static-fns"],true,["^2F","~:elide-asserts"],false,["^2F","~:optimize-constants"],null,["^2F","~:emit-constants"],null,["^2F","~:infer-externs"],true,["^2F","^U"],null,["~:js-options","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^2F","~:fn-invoke-direct"],null,["^2F","^W"],"/dev/null"]]]